# Объединение (Dissolve) пространственных объектов

## 1. Введение и теоретические основы

Объединение (англ. *dissolve*) — это фундаментальная операция векторной геообработки, направленная на **слияние смежных или перекрывающихся объектов одного слоя** в единые полигональные сущности на основе общих атрибутивных значений или топологической смежности. С геометрической точки зрения, dissolve представляет собой агрегацию множества полигонов \( \{P_1, P_2, ..., P_n\} \), имеющих общую границу или совпадающее значение поля, в новый полигон \( P_{\text{agg}} = \bigcup_{i=1}^{n} P_i \), при этом внутренние границы между исходными объектами устраняются.

В контексте геоинформационных систем данная операция служит инструментом **генерализации**, **упрощения** и **агрегации пространственных данных**. Она позволяет преобразовать детализированный слой (например, кадастровые участки) в обобщённый (например, зоны застройки), тем самым снижая визуальный шум на карте и ускоряя последующий анализ. Dissolve лежит в основе таких задач, как формирование административных районов из микрорайонов, объединение лесных массивов по породному составу или создание единой зоны влияния из множества буферов вокруг точечных объектов.

Методологически объединение относится к классу **топологических операций над векторными данными** и реализует принцип **пространственной агрегации**. В отличие от простого визуального упрощения, dissolve изменяет саму структуру данных, создавая новые геометрические объекты и, при необходимости, вычисляя агрегатные статистики по атрибутивным полям (сумма, среднее, максимум и др.).

## 2. Ключевые слова и семантические триггеры

объединение, dissolve, слияние, агрегация, генерализация, упрощение, зона, район, QGIS Dissolve, ArcMap Dissolve

## 3. Область применения

- **Административно-территориальное деление**: объединение кварталов в районы по коду ОКТМО.
- **Экологический мониторинг**: слияние смежных лесных массивов одного типа растительности.
- **Градостроительство**: формирование единых зон застройки из отдельных участков.
- **Социальная статистика**: агрегация данных переписи по муниципальным образованиям.
- **Логистика**: объединение зон доставки курьеров в единые территориальные сегменты.
- **Управление ЧС**: создание единой зоны эвакуации из множества частичных буферов.

## 4. Входные данные

- **Исходный слой**: полигональный векторный слой.
- **Поле для объединения (необязательно)**: текстовое или числовое поле, по значениям которого происходит группировка объектов.
- **Система координат**: рекомендуется метрическая проекция для корректного расчёта площадей и длин.
- **Топологическая корректность**: объекты должны иметь общие границы (shared borders) для слияния; щели и наложения могут привести к некорректным результатам.

> ⚠️ **Важно**: Если поле для объединения не указано, все объекты слоя будут объединены в **единый мультиполигон**.

## 5. Выходные данные

- Новый полигональный слой с устранёнными внутренними границами.
- Атрибутивная таблица содержит:
  - Поле, по которому выполнялось объединение (если задано),
  - Агрегатные поля (при наличии): сумма, среднее, минимум, максимум и др.
- Геометрия объектов упрощена за счёт удаления внутренних рёбер.

## 6. Программная реализация

### 6.1. QGIS (версия 3.28+)
- **Путь**: Вектор → Инструменты геообработки → Объединить...
- **Параметры**:
  - Input layer: исходный полигональный слой,
  - Dissolve field(s): поле(я) для группировки (можно выбрать несколько),
  - Statistics to calculate: при необходимости — выбор агрегатных функций,
  - Keep disjoint features separate: да/нет (сохранять ли несмежные объекты отдельно).
- **Особенности**: 
  - Поддерживает множественные поля для объединения,
  - Автоматически вычисляет площадь и периметр при агрегации,
  - Результат сохраняется в том же CRS, что и входные данные.

### 6.2. ArcMap 
Инструмент **Dissolve** входит в состав модуля **Data Management Tools** и широко используется в производственной практике для подготовки карт и отчётов.

#### Доступ к инструменту:
1. Откройте **ArcToolbox**.
2. Перейдите: **Data Management Tools → Generalization → Dissolve**.

#### Основные параметры:
- **Input Features**: исходный полигональный слой.
- **Output Feature Class**: путь к выходному файлу.
- **Dissolve Field(s)**: одно или несколько полей, по которым будет выполняться группировка.
- **Statistics Fields (Optional)**: поля и агрегатные функции (Sum, Mean, Min, Max, Count и др.).
- **Multi_part**: 
  - *MULTI_PART* — все смежные объекты одной группы объединяются в один мультиполигон,
  - *SINGLE_PART* — каждый фрагмент сохраняется отдельно (редко используется).
- **Unsplit lines**: применяется только к линиям (не к полигонам).

#### Особенности версий 10.4–10.8:
- В ArcMap 10.4–10.6 интерфейс **Field Map** для агрегации может быть непривычным — рекомендуется сначала протестировать на небольшой выборке.
- Начиная с 10.7, улучшена обработка NULL-значений при расчёте статистик.
- При работе с большими наборами данных (>100 тыс. полигонов) рекомендуется использовать **File Geodatabase** для повышения скорости и устойчивости.
- Инструмент автоматически устраняет **слайсы** (slivers) — микроскопические щели между объектами — если они меньше допуска топологии.

#### Типичные сценарии:
- **Формирование районов**:  
  Input = кварталы, Dissolve Field = `district_id` → результат: районы.
- **Агрегация лесов**:  
  Input = лесные участки, Dissolve Field = `forest_type` → результат: сплошные массивы по типу.
- **Объединение буферов**:  
  Input = буферы вокруг школ, без поля → результат: единая зона охвата.

## 7. Примеры формулировок пользовательских запросов

- «Как объединить все кварталы в районы по полю district?»
- «Нужно слить смежные лесные участки одного типа»
- «Объедини все буферы вокруг школ в одну зону»
- «Как в QGIS сделать dissolve по атрибуту?»
- «Слияние полигонов в ArcMap по общему значению»

## 8. Ограничения и особенности

1. **Требование к типу геометрии**: dissolve применим **только к полигонам и линиям**. Для точек операция не имеет смысла.
2. **Чувствительность к топологии**: наличие щелей, наложений или несовпадающих вершин может привести к созданию множества мелких фрагментов вместо единого полигона.
3. **Потеря детализации**: внутренние границы удаляются безвозвратно — операция необратима без исходных данных.
4. **Производительность**: при большом числе объектов и сложной геометрии время выполнения может достигать нескольких минут.
5. **Ограничения ArcMap**: в версиях до 10.7 отсутствует опция сохранения несмежных объектов отдельно (аналог `Keep disjoint features separate` в QGIS).

## 9. Научно-методическое обоснование

Объединение является ключевым элементом **картографической генерализации** и соответствует принципу **иерархической организации пространственных данных**. В учебниках по ГИС (например, de Smith et al., *Geospatial Analysis*, 2018) dissolve рассматривается как базовая операция для перехода от крупномасштабных к мелкомасштабным представлениям и обязательный этап подготовки данных для тематического картографирования.

## 10. Литература и нормативные источники

- de Smith M. J., Goodchild M. F., Longley P. A. *Geospatial Analysis: A Comprehensive Guide*. — 6th ed. — Locate Press, 2018.
- ISO 19107:2003. *Geographic information — Spatial schema*.
- QGIS Documentation. *Dissolve*. URL: https://docs.qgis.org
- Esri. *Dissolve (Data Management)*. ArcGIS Desktop Help (версии 10.4–10.8). URL: https://desktop.arcgis.com
