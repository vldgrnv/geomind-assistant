# Пересечение (Intersect) пространственных слоёв

## 1. Введение и теоретические основы

Пересечение (англ. *intersect*) — это фундаментальная операция overlay-анализа, направленная на выявление **геометрических и атрибутивных совпадений** между двумя или более векторными слоями. С геометрической точки зрения, intersect представляет собой пересечение множеств объектов \( A \) и \( B \), результатом которого является новое множество \( C = A \cap B \), где каждый объект \( c_i \in C \) содержит **только ту часть геометрии**, которая одновременно принадлежит обоим исходным слоям, а также **объединённые атрибуты** из обоих источников.

В контексте геоинформационных систем данная операция служит инструментом **выявления пространственных взаимодействий**, **оценки зон совпадения** и **интеграции разнородных данных**. Intersect позволяет ответить на ключевые прикладные вопросы: «Какие участки леса находятся в пределах охранной зоны?», «Какие дома попадают в зону затопления?», «Какие дороги проходят через заказник?». Операция лежит в основе экологического анализа, градостроительного планирования, управления чрезвычайными ситуациями и кадастрового учёта.

Методологически пересечение относится к классу **топологических операций над векторными данными** и реализует предикат *Intersects* в строгой форме: результат включает **только общие области**. В отличие от *clip*, intersect сохраняет атрибуты **обоих** входных слоёв, что делает его мощным инструментом для последующего анализа корреляций и зависимостей.

## 2. Ключевые слова и семантические триггеры

пересечение, intersect, overlay, наложение, зона совпадения, перекрытие, QGIS Intersect, ArcMap Intersect

## 3. Область применения

- **Экологический мониторинг**: выявление лесных массивов, расположенных внутри особо охраняемых природных территорий.
- **Градостроительство**: определение земельных участков, попадающих в зону реконструкции.
- **Кадастр**: установление пересечений между границами муниципальных образований и землепользованием.
- **Управление ЧС**: выявление объектов инфраструктуры, находящихся в зоне возможного затопления.
- **Логистика**: анализ пересечений маршрутов доставки с зонами платного въезда.
- **Социальная статистика**: оценка населения, проживающего в районах с высоким уровнем загрязнения.

## 4. Входные данные

- **Два или более векторных слоя** (точки, линии, полигоны).
- **Совместимость типов геометрии**: 
  - Полигон × Полигон → Полигон,
  - Полигон × Линия → Линия,
  - Полигон × Точка → Точка,
  - Линия × Линия → Точка (или линия, если совпадают фрагменты),
  - Точка × Точка → Точка (только при совпадении координат).
- **Единая система координат** (рекомендуется метрическая проекция).
- **Топологическая корректность**: отсутствие самопересечений и щелей.

> ⚠️ **Важно**: Если объекты не пересекаются, они **не попадают** в результат. Это отличает intersect от spatial join с опцией «keep all records».

## 5. Выходные данные

- Новый векторный слой, тип геометрии которого определяется комбинацией входных типов.
- Атрибутивная таблица содержит **все поля из всех входных слоёв**.
- Геометрия объектов ограничена **зоной пересечения**.
- При пересечении полигонов с полигонами результат может содержать **мультиполигоны**.

## 6. Программная реализация

### 6.1. QGIS (версия 3.28+)
- **Путь**: Вектор → Инструменты геообработки → Пересечение...
- **Параметры**:
  - Input layer: первый слой,
  - Overlay layer: второй слой,
  - Output: путь к выходному файлу.
- **Особенности**: 
  - Поддерживает только два слоя за один запуск (для большего числа — цепочка операций),
  - Автоматически обрабатывает мультигеометрии,
  - Результат сохраняется в CRS первого слоя.

### 6.2. ArcMap

Инструмент **Intersect** входит в состав модуля **Analysis Tools → Overlay** и является одним из ключевых в производственной практике.

#### Доступ к инструменту:
1. Откройте **ArcToolbox**.
2. Перейдите: **Analysis Tools → Overlay → Intersect**.

#### Основные параметры:
- **Input Features**: список слоёв для пересечения (до 10 слоёв).
- **Output Feature Class**: путь к выходному файлу.
- **Join Attributes**: 
  - *ALL* — все атрибуты из всех слоёв,
  - *NO_FID* — без полей FID,
  - *ONLY_FID* — только идентификаторы.
- **Cluster Tolerance (необязательно)**: допуск для слияния вершин (в единицах CRS).

#### Особенности версий 10.4–10.8:
- В ArcMap 10.4–10.6 инструмент может работать медленно с большими наборами данных (>50 000 объектов). Рекомендуется использовать **File Geodatabase**.
- Начиная с 10.7, улучшена обработка сложных пересечений (например, многослойных полигонов).
- При работе с точками и линиями результат может быть пустым, если нет точного совпадения — рекомендуется использовать **buffer + intersect** для учёта погрешностей.
- Инструмент **сохраняет топологию** результата, но может создавать микроскопические фрагменты (slivers) — их можно удалить через *Eliminate*.

#### Типичные сценарии:
- **Экологический анализ**:  
  Input = леса.shp, охранная_зона.shp → Output = леса_в_зоне.shp
- **Оценка рисков**:  
  Input = дома.shp, зона_затопления.shp → Output = дома_в_риске.shp
- **Градостроительство**:  
  Input = участки.shp, зона_реконструкции.shp → Output = участки_под_снос.shp

## 7. Примеры формулировок пользовательских запросов

- «Как найти леса, которые находятся внутри заказника?»
- «Нужно определить дома, попадающие в зону затопления»
- «Как в QGIS сделать пересечение двух слоёв?»
- «Пересеки слой дорог со слоем парков»
- «Какие участки пересекаются с красной линией?»

## 8. Ограничения и особенности

1. **Чувствительность к точности данных**: даже небольшие расхождения в границах могут привести к отсутствию пересечения. Рекомендуется предварительно выполнять **snap** или **buffer**.
2. **Производительность**: время выполнения растёт экспоненциально с увеличением числа объектов.
3. **Сложность результата**: при пересечении сложных полигонов могут возникать сотни мелких фрагментов.
4. **Ограничения типов**: пересечение точки с линией даёт результат **только при точном совпадении координат**.
5. **Ограничения ArcMap**: в версиях до 10.7 отсутствует опция автоматического устранения slivers.

## 9. Научно-методическое обоснование

Пересечение является базовой операцией **overlay-анализа**, заложенного ещё в ранних ГИС (например, в Canadian GIS). В учебниках по ГИС (например, de Smith et al., *Geospatial Analysis*, 2018) intersect рассматривается как ключевой метод для выявления пространственных зависимостей и обязательный этап в пайплайнах экологического и урбанистического моделирования.

## 10. Литература и нормативные источники

- de Smith M. J., Goodchild M. F., Longley P. A. *Geospatial Analysis: A Comprehensive Guide*. — 6th ed. — Locate Press, 2018.
- ISO 19107:2003. *Geographic information — Spatial schema*.
- QGIS Documentation. *Intersection*. URL: https://docs.qgis.org
- Esri. *Intersect (Analysis)*. ArcGIS Desktop Help (версии 10.4–10.8). URL: https://desktop.arcgis.com
